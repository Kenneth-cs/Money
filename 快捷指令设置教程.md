# iOS快捷指令设置教程 - 截图自动记账

## 🎯 功能说明

这个快捷指令将实现：
1. **自动截屏** - 截取当前屏幕内容
2. **OCR识别** - 识别截图中的文字信息
3. **智能解析** - 提取金额、商家等信息
4. **自动记账** - 调用Money App保存记录

## 📱 设置步骤

### 第一步：创建快捷指令

1. **打开"快捷指令"App**
2. **点击右上角"+"**
3. **输入快捷指令名称**：`截图记账`

### 第二步：添加动作序列

按顺序添加以下动作：

#### 1. 截屏动作
- **搜索**：`截屏`
- **添加**：`拍摄屏幕截图`
- **设置**：保持默认设置

#### 2. OCR文字识别
- **搜索**：`从图像中获取文本`
- **添加**：`从图像中获取文本`
- **输入**：选择上一步的截图
- **语言**：选择`中文`和`英文`

#### 3. 文本处理（可选）
- **搜索**：`获取文本中的数字`
- **添加**：`获取文本中的数字`
- **用途**：提取金额数字

#### 4. 调用Money App
- **搜索**：`打开App`
- **添加**：`打开App`
- **选择App**：`Money` (如果找不到，选择`打开URL`)

#### 5. URL调用方式（推荐）
如果直接打开App不够智能，使用URL调用：
- **搜索**：`打开URL`
- **添加**：`打开URL`
- **URL格式**：`money://add-expense?text=[OCR识别的文本]`

### 第三步：高级配置

#### 智能参数传递
```
URL: money://add-expense
参数:
- text: [OCR识别的完整文本]
- amount: [提取的金额]
- note: 截图自动识别
```

#### 条件判断
- **添加**：`如果`
- **条件**：文本包含"支付"或"¥"
- **执行**：调用Money App
- **否则**：显示"未识别到支付信息"

### 第四步：测试和优化

1. **点击"播放"按钮测试**
2. **检查截图是否正常**
3. **验证OCR识别效果**
4. **确认Money App是否正确调用**

## 🔗 与Money App的集成

### URL Scheme调用格式

我们的Money App支持以下URL调用：

```
money://add-expense?amount=100&category=餐饮&note=截图识别
```

参数说明：
- `amount`: 金额
- `category`: 分类
- `account`: 账户
- `note`: 备注

### 完整的快捷指令流程

```
1. 截屏 → 
2. OCR识别 → 
3. 文本解析 → 
4. 调用Money App → 
5. 自动填充信息
```

## 📋 快捷指令动作列表

| 步骤 | 动作名称 | 设置 |
|------|----------|------|
| 1 | 拍摄屏幕截图 | 默认设置 |
| 2 | 从图像中获取文本 | 语言：中文+英文 |
| 3 | 获取文本中的数字 | 提取金额 |
| 4 | 文本操作 | 清理和格式化 |
| 5 | 打开URL | 调用Money App |

## 🎨 快捷指令优化建议

### 1. 添加确认步骤
```
显示通知 → "识别到金额：¥XX，是否记账？" → 选择菜单
```

### 2. 错误处理
```
如果 → OCR识别失败 → 显示"识别失败，请重试"
```

### 3. 智能分类
```
文本匹配 → 包含"餐厅"/"外卖" → 设置分类为"餐饮"
```

## 🔧 高级功能

### 批量处理
- 可以设置处理相册中的多张截图
- 批量识别和记账

### 定时触发
- 设置特定时间自动运行
- 处理当天的所有截图

### Siri集成
- 添加Siri短语："嘿Siri，截图记账"
- 语音触发快捷指令

## ⚠️ 注意事项

1. **权限设置**
   - 确保快捷指令有截屏权限
   - 允许访问相册和相机

2. **隐私保护**
   - 截图可能包含敏感信息
   - 建议设置自动删除截图

3. **识别准确性**
   - OCR识别可能不是100%准确
   - 建议添加人工确认步骤

## 🎯 使用方法

### 方法1：手动触发
1. 打开需要记账的页面（支付宝、微信等）
2. 运行"截图记账"快捷指令
3. 确认识别结果并保存

### 方法2：Siri语音
1. 说"嘿Siri，截图记账"
2. 等待自动处理
3. 确认结果

### 方法3：小组件
1. 添加快捷指令小组件到主屏幕
2. 一键触发截图记账

## 🔍 故障排除

### 问题1：无法截屏
- 检查快捷指令权限设置
- 确认屏幕录制权限已开启

### 问题2：OCR识别不准确
- 确保截图清晰
- 检查语言设置
- 尝试手动调整识别区域

### 问题3：无法调用Money App
- 确认URL Scheme配置正确
- 检查Money App是否已安装
- 验证URL参数格式

---

*按照以上步骤设置后，您就可以实现一键截图自动记账的功能了！* 🎉 