# 超级简单快捷记账工具 (Money)

## 🎯 项目目标

开发一款iOS平台的极简记账工具，通过快捷方式快速唤起，支持截屏识别和自动记账功能。让记账变得像拍照一样简单！

## 📱 核心功能

### 1. 快捷方式集成
- **iOS快捷方式支持**：通过Siri快捷方式快速启动记账功能
- **后台快速启动**：无需打开主应用，直接执行记账流程
- **语音唤起**：支持"Hey Siri，记账"等语音指令

### 2. 智能截屏识别
- **自动截屏**：调用系统截屏功能
- **OCR文字识别**：识别截屏中的文字信息
- **智能解析**：自动提取金额、商家、时间等关键信息
- **支持场景**：
  - 支付宝/微信支付截图
  - 银行短信截图
  - 购物小票拍照
  - 转账记录截图

### 3. 自动记账
- **智能分类**：根据识别内容自动分类（餐饮、交通、购物等）
- **商家识别**：自动识别常见商家名称
- **金额提取**：精确提取交易金额
- **时间记录**：自动记录交易时间
- **备注生成**：根据识别内容生成合适的备注

### 4. 数据管理
- **本地存储**：使用Core Data本地存储，保护隐私
- **账本管理**：支持多个账本（个人、家庭、公司等）
- **账户管理**：支持不同支付方式（现金、信用卡、支付宝等）
- **标签系统**：灵活的标签管理

## 🛠 技术方案

### 开发框架
- **Swift + SwiftUI**：现代化的iOS开发框架
- **Core Data**：本地数据存储
- **Vision Framework**：图像识别和OCR
- **Intents Framework**：快捷方式集成
- **PhotosUI**：图片选择和处理

### 架构设计
```
Money App
├── Views (界面层)
│   ├── ContentView.swift (主界面) ✅
│   ├── AddExpenseView.swift (添加支出) ✅
│   ├── ExpenseListView.swift (支出列表)
│   └── SettingsView.swift (设置)
├── Models (数据模型)
│   ├── Expense.swift (支出模型) ✅
│   ├── Category.swift (分类模型) ✅
│   └── Account.swift (账户模型) ✅
├── Services (业务逻辑)
│   ├── OCRService.swift (OCR识别服务)
│   ├── DataManager.swift (数据管理) ✅
│   └── IntentHandler.swift (快捷方式处理)
└── Extensions (扩展工具)
    ├── Date+Extension.swift
    └── String+Extension.swift
```

## 📋 开发计划

### Phase 1: 基础框架搭建 ✅ **已完成** (第1-2天)
- [x] 创建SwiftUI项目结构
- [x] 设计数据模型 (Expense, Category, Account)
- [x] 集成Core Data
- [x] 创建基础UI界面
- [x] 实现数据管理器
- [x] 完成主界面和添加支出界面

### Phase 2: 核心功能开发 (第3-5天)
- [ ] 实现OCR图像识别功能
- [ ] 开发智能文本解析算法
- [ ] 完善添加支出界面
- [ ] 实现支出列表和搜索功能

### Phase 3: 快捷方式集成 (第6-7天)
- [ ] 创建Intents扩展
- [ ] 实现快捷方式处理逻辑
- [ ] 集成系统截屏功能
- [ ] 测试快捷方式流程

### Phase 4: 优化和测试 (第8-9天)
- [ ] UI/UX优化
- [ ] 性能优化
- [ ] 错误处理完善
- [ ] 全面测试

### Phase 5: 发布准备 (第10天)
- [ ] App Store配置
- [ ] 用户说明文档
- [ ] 最终测试和bug修复

## 🎨 界面设计

### 主界面功能 ✅
- **快速添加按钮**：大号的"+"按钮，支持多种添加方式
- **最近记录**：显示最近的几笔支出
- **统计卡片**：今日/本月支出统计
- **快捷分类**：常用分类快速选择

### 添加支出界面 ✅
- **金额输入**：大号数字键盘
- **分类选择**：图标+文字的分类选择
- **账户选择**：支付方式选择
- **备注输入**：可选的备注信息
- **照片识别**：支持拍照或选择图片识别

## 📱 使用方法

### 快捷方式使用
1. **设置快捷方式**
   - 打开"快捷指令"app
   - 搜索"Money记账"
   - 添加到主屏幕或Siri

2. **语音记账**
   - 说"Hey Siri，记账"
   - 系统自动截屏并识别
   - 确认信息后自动保存

3. **手动记账**
   - 点击快捷方式图标
   - 选择拍照或从相册选择
   - 系统自动识别并填充信息

### 数据管理
- **查看记录**：在主界面查看所有支出记录
- **编辑记录**：长按记录可编辑或删除
- **导出数据**：支持导出CSV格式数据
- **备份恢复**：iCloud自动备份

## 🔧 技术细节

### OCR识别优化
- **预处理**：图像增强、去噪、角度矫正
- **关键词匹配**：预设常见商家和消费场景关键词
- **正则表达式**：精确提取金额、时间等结构化信息
- **机器学习**：基于用户使用习惯优化识别准确率

### 性能优化
- **异步处理**：OCR识别在后台线程执行
- **缓存机制**：识别结果和图片缓存
- **内存管理**：及时释放大图片内存
- **电池优化**：避免频繁的CPU密集型操作

### 隐私保护
- **本地处理**：所有数据处理在本地完成
- **无网络传输**：不上传任何个人信息
- **权限最小化**：只请求必要的系统权限
- **数据加密**：敏感数据本地加密存储

## 🎉 当前项目状态

### ✅ 已完成功能
1. **项目基础架构**
   - SwiftUI + CoreData 技术栈搭建完成
   - 数据模型设计完成（Expense、Category、Account）
   - 数据管理器实现完成

2. **界面开发**
   - 主界面：统计卡片、快速添加按钮、最近记录列表
   - 添加支出界面：金额输入、分类选择、账户选择
   - 美观的UI设计，支持深色模式

3. **数据功能**
   - 支出记录的增删查改
   - 预设10种常用分类（餐饮、交通、购物等）
   - 预设5种支付方式（现金、银行卡、信用卡、支付宝、微信）
   - 今日/本月消费统计

4. **编译状态**
   - ✅ 项目编译成功
   - ✅ 无编译错误
   - ✅ 代码结构清晰，注释完善

### 🔄 下一步计划
1. **OCR功能开发**：集成Vision Framework实现图像识别
2. **智能解析**：开发文本解析算法，提取金额、商家等信息
3. **支出列表**：完善支出记录列表界面
4. **快捷方式集成**：实现iOS快捷指令支持

## 🐛 已知问题和改进计划

### 当前版本问题
- OCR识别功能待开发
- 快捷方式集成待实现
- 需要更多的测试数据验证

### 改进计划
- 增加更多支付场景的识别支持
- 优化UI/UX设计
- 增加数据统计和分析功能
- 支持多人共享账本

## 📞 支持和反馈

如有问题或建议，请及时反馈以便我们持续改进这个工具！

---
**最后更新时间**: 2025年6月14日  
**项目状态**: Phase 1 已完成，进入Phase 2开发  
**开发者**: 您的专属产品经理和工程师 